stages:
  prepare:
    cmd: python -m model_training.data.make_dataset
    deps:
      - model_training/data/make_dataset.py
      - data/raw
    outs:
      - data/processed
      
  train:
    cmd: python -m model_training.models.train_model
    deps:
      - model_training/models/train_model.py
      - data/processed
    params:
      - training
    outs:
      - models/model.joblib
    metrics:
      - reports/metrics.json:
          cache: false
      
  evaluate:
    cmd: python -m model_training.models.evaluate_model
    deps:
      - model_training/models/evaluate_model.py
      - models/model.joblib
      - data/processed
    metrics:
      - reports/evaluation.json:
          cache: false
          
  prepare_service:
    cmd: python prepare_for_model_service.py
    deps:
      - prepare_for_model_service.py
      - models/model.joblib
    outs:
      - model_service_artifacts 